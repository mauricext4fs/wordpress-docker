#!/bin/bash

echo 
echo "This script will install the latest version of Wordpress in "wordpress" directory";
echo 
echo 

echo "Checking for existing www-gateway docker network..."
if [[ ! "$(docker network ls | grep www-gateway)" ]]
then
    echo "Doesn't exist. Creating network www-gateway..." && echo "";
    docker network create www-gateway > /dev/null
fi

if [ -d "./wordpress" ]
then
    echo "wordpress directory already exist... aborting";
    exit 1;
fi

wget https://wordpress.org/latest.zip
unzip *.zip
rm *.zip

echo "This will replace the content of ./plugins and ./themes"
read -p "Are you sure? " -n 1 -r
echo 
if [[ $REPLY =~ ^[Yy]$ ]]
then
    cp -fR wordpress/wp-content/plugins/* plugins/
    rm -fR wordpress/wp-content/plugins/*
    cp -fR wordpress/wp-content/themes/* themes/
    rm -fR wordpress/wp-content/themes/*
fi